(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(72)},69:function(e,t){},72:function(e,t,n){"use strict";n.r(t);var o,r,a,i,s=n(0),d=n(31),c=n(2),l=n.n(c),u=n(36),h=n(32),f=n(5),p=n(37),m=n(38),v=n(33);function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}var t,n,s;return t=e,s=[{key:"start",value:function(){o("frame").start(),a.start(),o("rAF").tick(),o("FPS").frame(),o("render").start()}},{key:"end",value:function(){o("render").end(),o("frame").end(),o("rStats").start(),o().update(),o("rStats").end()}}],(n=[{key:"setUp",value:function(){r=new BrowserStats,a=new glStats,i=new threeStats(this.renderer),o=new rStats({CSSPath:"./css/",userTimingAPI:!0,values:{frame:{caption:"Total frame time (ms)",over:16,average:!0,avgMs:100},fps:{caption:"Framerate (FPS)",below:30},calls:{caption:"Calls (three.js)",over:3e3},raf:{caption:"Time since last rAF (ms)",average:!0,avgMs:100},rstats:{caption:"rStats update (ms)",average:!0,avgMs:100},texture:{caption:"GenTex",average:!0,avgMs:100}},groups:[{caption:"Framerate",values:["fps","raf"]},{caption:"Frame Budget",values:["frame","texture","setup","render"]}],fractions:[{base:"frame",steps:["texture","setup","render"]}],plugins:[r,i,a]})}}])&&g(t.prototype,n),s&&g(t,s),e}();function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){var n=function(e){for(var t=window.atob(e.split(",")[1]),n=t.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=t.charCodeAt(r);return new window.Blob([o])}(t),o=document.createElement("a");o.download=e,o.href=window.URL.createObjectURL(n),o.onclick=function(){window.setTimeout((function(){window.URL.revokeObjectURL(n),o.removeAttribute("href")}),500)},o.click()}var k=function(){function e(t,n,o,r,a,i,d,c,l,u){var h=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=r,this.controls=a,this.canvas=d,this.container=i,this.camera=c,this.appState=l,this.dataPool=u,this.useHighQuality=t,this.useBloom=n,this.useStats=o,this.renderer=new s.E({canvas:d,antialias:t,preserveDrawingBuffer:!0,alpha:!0}),this.renderer.autoClear=!1,this.useStats&&(this.stats=new y(this.renderer),this.stats.setUp()),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=s.p,(t||n)&&this.initComposer(),n&&this.initBloomComposer(),t&&this.initFXAAComposer(),this.updateSize(this.canvas.offsetWidth,this.canvas.offsetHeight),document.addEventListener("DOMContentLoaded",(function(){return h.updateSize()}),!1),window.addEventListener("resize",(function(){return h.updateSize()}),!1),this.controls.addEventListener("change",(function(){return h.render()})),this.render=this.render.bind(this),this.updateSize=this.updateSize.bind(this),this.takeScreenshot=this.takeScreenshot.bind(this);var f=document.getElementById("btnSaveImage");f&&f.addEventListener("click",(function(e){return h.takeScreenshotModal()}))}var t,n,o;return t=e,(n=[{key:"initComposer",value:function(){this.composer=new u.a(this.renderer);var e=new h.a(this.scene,this.camera);this.composer.addPass(e)}},{key:"initBloomComposer",value:function(){console.info("Init Bloom"),this.renderer.toneMapping=s.v,new p.a(1,25,4,256),this.bloomPass=new m.a(new s.B(window.innerWidth,window.innerHeight),1,2,0),this.composer.addPass(this.bloomPass)}},{key:"initFXAAComposer",value:function(){console.info("Init FXAA");var e=new f.a(v.a),t=this.renderer.getPixelRatio();e.material.uniforms.resolution.value.x=1/(this.canvas.offsetWidth*t),e.material.uniforms.resolution.value.y=1/(this.canvas.offsetHeight*t),this.fxaaPass=e,this.composer.addPass(e)}},{key:"setCameraAspect",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.canvas,n){var o=e/t,r=this.appState.originalAspect/o,a=1*r;this.camera.left=-o*a/2,this.camera.right=o*a/2,this.camera.top=a/2,this.camera.bottom=-a/2}this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"updateSize",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=e||this.container.clientWidth,t=t||this.container.clientHeight,this.setCameraAspect(e,t,n),this.useHighQuality||this.useBloom?(this.renderer.setSize(e,t),this.composer.setSize(e,t)):this.renderer.setSize(e,t),this.useHighQuality){var o=this.renderer.getPixelRatio();this.fxaaPass.material.uniforms.resolution.value.x=1/(e*o),this.fxaaPass.material.uniforms.resolution.value.y=1/(t*o)}this.render()}},{key:"render",value:function(){this.useStats&&y.start(),this.useHighQuality||this.useBloom?this.composer.render():this.renderer.render(this.scene,this.camera),this.useStats&&y.end()}},{key:"delete",value:function(){var e=this;this.render=function(){return 0},document.removeEventListener("DOMContentLoaded",(function(){return e.updateSize()}),!1),window.removeEventListener("resize",(function(){return e.updateSize()}),!1);var t=document.getElementById("btnSaveImage");t&&t.removeEventListener("click",(function(t){return e.takeScreenshot()}))}},{key:"stop",value:function(){this.delete()}},{key:"getURI",value:function(e,t,n){e=e||this.container.clientWidth,t=t||this.container.clientHeight,this.setCameraAspect(e,t,!1);var o=this.scene.background;n&&(this.renderer.setClearColor(0,0),this.scene.background=null),this.renderer.setSize(e,t),this.composer.setSize(e,t),this.composer.render();var r=this.canvas.toDataURL("image/png",1);return n&&(this.scene.background=o),this.appState.takingScreenshot=!1,this.updateSize(),r}},{key:"takeScreenshot",value:function(e,t,n){return this.appState.takingScreenshot=!0,this.appState.stopChanges=!0,this.getURI(e,t,n)}},{key:"takeScreenshotModal",value:function(){$("#saveImageModal").modal("hide"),this.appState.takingScreenshot=!0,this.appState.stopChanges=!0;var e,t=parseInt(document.getElementById("widthSaveImage").value),n=parseInt(document.getElementById("heightSaveImage").value),o=document.getElementById("saveWithTransparency").checked,r=document.getElementById("send2server").checked,a=this.getURI(t,n,o);r&&this.dataPool?this.dataPool.send2server(a):w((e=".png","".concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString()).concat(e).replace(/\//g,"-").replace(/:/g,".")),a)}}])&&b(t.prototype,n),o&&b(t,o),e}(),S=n(10),C=n.n(S),E={address:"127.0.0.1:6688",scene:{color:0},isDev:!0,render:{antialias:!0},isShowingStats:!0,useStats:!0,useGuiControl:!1,useKeyboard:!0,isLoaded:!1,isMouseMoving:!1,isMouseOver:!1,maxAnisotropy:2,bloomPass:{exposure:1,strength:.5,threshold:0,radius:0},dpr:1,layers:{0:{},1:{enabled:!0,clearColor:0,exposure:1,strength:.5,bloomStrength:5,bloomThreshold:0,bloomRadius:0},2:{},3:{enabled:!1,exposure:1,clearColor:0,strength:.5,bloomStrength:5,bloomThreshold:0,bloomRadius:0,scene:"Scene with Glow"}},nodes:{material:"fast",scale:1,show:!0,radius:.5,color:255,edgeColor:255,edgeWidth:.1,roughness:.5,opacity:1},edges:{width:.5,show:!0,color:255,roughness:.5,opacity:1},fog:{color:16777215,near:8e-4},camera:{fov:40,near:2,far:1e3,aspect:1},controls:{autoRotate:!1,autoRotateSpeed:-.5,rotateSpeed:.5,zoomSpeed:.8,minDistance:0,maxDistance:600,minPolarAngle:0,maxPolarAngle:Math.PI,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,enableDamping:!0,dampingFactor:.5,enableZoom:!0,target:{x:0,y:0,z:0}}};function x(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";console.info("Get Marker Vertex Shader");var o="\n\n    #define SHADER_NAME MarkerNode_".concat(n,"\n\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform mat4 viewMatrix;\n    attribute vec3 position;\n\n    attribute vec3 bufferNodePositions;\n    ");return o+=e?"uniform float bufferNodeSize;":"attribute float bufferNodeSize;",o+=t?"uniform vec3 bufferColors;":"attribute vec3 bufferColors;",o+="\n\n    uniform float bufferOpacity;\n    uniform float bufferNodeScale;\n    uniform float edgeWidth;\n    uniform vec3 edgeColor;\n\n    varying vec3 vColor;\n    varying vec3 vEdgeColor;\n    varying vec3 vPos;\n    varying float vOpacity;\n    varying float vEdgeWidth;\n\n    void main() {\n        vec4 viewNodePos = modelViewMatrix * vec4( bufferNodePositions, 1.0 );\n\n        vec4 mvPosition = viewNodePos +  vec4(position*bufferNodeScale*bufferNodeSize, 0);\n        // if particle size\n        //vec4 mvPosition = viewNodePos +  vec4(position, 0);\n        //gl_PointSize  = bufferNodeScale*bufferNodeSize;\n        //gl_PointSize  = 5.0;\n\n        gl_Position = projectionMatrix * mvPosition;\n\n\n        vColor = bufferColors;\n        vOpacity = bufferOpacity;\n        vPos = position;\n        vEdgeWidth = edgeWidth;\n        vEdgeColor = edgeColor;\n    }\n\n    "}var P={o:"\n        edgeWidth = edgeWidth/2.;\n        float minSdf = 0.5;\n        sdf = -length(p) + s;\n    ",s:"\n\n        edgeWidth = edgeWidth/2.;\n        float minSdf = 0.5/2.0;\n        vec2 d = abs(p) - vec2(s, s);\n        sdf = -length(max(d,0.0)) - min(max(d.x,d.y),0.0);\n    ",d:"\n\n        edgeWidth = edgeWidth/4.;\n        float minSdf = 0.5/2.0;\n        vec2 b  = vec2(s, s/2.0);\n        vec2 q = abs(p);\n        float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n        float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n        sdf = -d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n    ","^":"\n        float l = s/1.5;\n        float minSdf = 1000.0;\n        float k = sqrt(3.0);\n        p.x = abs(p.x) - l;\n        p.y = p.y + l/k;\n        if( p.x+k*p.y>0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n        p.x -= clamp( p.x, -2.0*l, 0.0 );\n        sdf = length(p)*sign(p.y);\n    ",p:"\n        edgeWidth = edgeWidth/4.;\n        float minSdf = 0.5/2.0;\n        float r = s/2.0;\n        const vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n        p.x = abs(p.x);\n        p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n        p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n        p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n        sdf = -length(p)*sign(p.y);\n    ",h:"\n\n        edgeWidth = edgeWidth/4.;\n        float minSdf = 0.5/2.0;\n        float r = s/2.0;\n        const vec3 k = vec3(-0.866025404,0.5,0.577350269);\n        p = abs(p);\n        p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n        p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n        sdf = -length(p)*sign(p.y);\n    ",s6:"\n\n        float minSdf = 0.5/2.0;\n        edgeWidth = edgeWidth/4.;\n        float r = s/2.0;\n        const vec4 k = vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n        p = abs(p);\n        p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n        p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n        p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n        sdf = -length(p)*sign(p.y);\n    ",x:"\n\n        edgeWidth = edgeWidth/8.;\n        float minSdf = 0.5/4.0;\n\n        float r = s/4.0;\n        float w = 0.5;\n        p = abs(p);\n        sdf = -length(p-min(p.x+p.y,w)*0.5) + r;\n    ","+":"\n\n        edgeWidth = edgeWidth/4.;\n\n        float minSdf = 0.5/2.0;\n        float r = s/15.0; //corner radius\n        vec2 b = vec2(s/1.0, s/3.0); //base , size\n        //vec2 b = vec2(r, r);\n        p = abs(p); p = (p.y>p.x) ? p.yx : p.xy;\n        vec2  q = p - b;\n        float k = max(q.y,q.x);\n        vec2  w = (k>0.0) ? q : vec2(b.y-p.x,-k);\n        sdf = -sign(k)*length(max(w,0.0)) - r;\n    "};function A(e){return Object.keys(P).includes(e)||(e="o"),P[e]}function N(e){return"3do"!=e?"":("\n        // shading\n\n        vec3 normal = normalize(vec3(p.xy, sdf));\n        vec3 direction = normalize(vec3(1.0, 1.0, 1.0));\n        float diffuse = max(0.25, dot(direction, normal));\n        float specular = pow(diffuse, 15.0);\n        color = vec3(max(diffuse*color, specular*vec3(1.0)));\n        //color = vec3(diffuse*color);\n    ","\n        // shading\n\n        vec3 normal = normalize(vec3(p.xy, sdf));\n        vec3 direction = normalize(vec3(1.0, 1.0, 1.0));\n        float diffuse = max(0.25, dot(direction, normal));\n        float specular = pow(diffuse, 15.0);\n        color = vec3(max(diffuse*color, specular*vec3(1.0)));\n        //color = vec3(diffuse*color);\n    ")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";return console.info(e),"\n    precision highp float;\n\n    #define SHADER_NAME MarkerNode_".concat(t,"\n\n    varying vec3 vColor;\n    varying float vOpacity;\n    varying float vEdgeWidth;\n    varying vec3 vPos;\n    varying vec3 vEdgeColor;\n\n    float ndot(vec2 a, vec2 b ) {\n        return a.x*b.x - a.y*b.y;\n    }\n    void main() {\n\n        vec3 color = vColor;\n        vec3 edgeColor = vEdgeColor;\n        float edgeWidth = vEdgeWidth;\n        vec2 p = vPos.xy;\n        float opacity = vOpacity;\n\n        float s = 0.5;\n        float sdf = 0.0;\n        ").concat(A(e),"\n        if (sdf<0.0) discard;\n\n        //float edge0 = 0.0;\n        //float edge1 = minSdf;\n        float opacity2 = opacity;\n        //if (opacity<1.0) opacity2 =  clamp((sdf - edge0) / (edge1 - edge0), 0.01, opacity) + 0.1;\n        ").concat(N(e),"\n\n        vec4 rgba = vec4(  color, opacity2 );\n\n\n        if (edgeWidth > 0.0){\n            if (sdf < edgeWidth)  rgba  = vec4(edgeColor, 1.0);\n        }\n\n        gl_FragColor = rgba;\n\n    }\n    ")}var O={Circle:"o",Sphere:"3do",Square:"s",Rhombus:"d",Triangle:"^",Petagon:"p",Hexagon:"h",Star:"s6",Cross:"+",X:"x"},G=function(){return Math.random().toString(36).substring(2,15)},I=function(e){return e[Math.floor(e.length*Math.random())]};function M(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=j(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,i=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(i)throw r}}}}function j(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.use2d=n,this.nodesGroup={},this.selectedGroupName=""}var t,n,o;return t=e,(n=[{key:"setGroup",value:function(e){this.selectedGroupName=Object.keys(this.nodesGroup).includes(value)?value:""}},{key:"getGroup",value:function(){var e=Object.entries(this.nodesGroup);return""!=this.selectedGroupName?[[this.selectedGroupName,this.nodesGroup[this.selectedGroupName]]]:e}},{key:"colorByField",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=o[0],a=o[1],i=a.nodesData[e].flat();if(i.length!=3*a.numNodes)return void l.a.error(" ".concat(e," it's not in RGB format "));this.updateColors(i,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateColors",value:function(e,t){var n=this.nodesGroup[t];n.fixedColor?(n.mesh.material.vertexShader=x(n.fixedNodeSize,!1,t),n.mesh.geometry.addAttribute("bufferColors",new s.g(new Float32Array(e),3,!1)),n.fixedColor=!1,delete n.uniforms.bufferColors,n.mesh.geometry.needsUpdate=!0):(n.mesh.geometry.attributes.bufferColors.array=new Float32Array(e),n.mesh.geometry.attributes.bufferColors.needsUpdate=!0),n.mesh.material.needsUpdate=!0}},{key:"colorByProp",value:function(e){var t,n=this,o=U(this.getGroup());try{var r=function(){var o=F(t.value,2),r=o[0],a=o[1],i=C()({colormap:"jet",nshades:a.numNodes,format:"float",alpha:1}),s=a.nodesData[e],d=i.map((function(e,t){return[s[String(t)],e]})).sort((function(e,t){var n=F(e,1)[0];return F(t,1)[0]-n})).map((function(e){return F(e,2)[1]})).map((function(e){var t=F(e,4),n=t[0],o=t[1],r=t[2];return t[3],[n,o,r]})).flat();n.updateColors(d,r)};for(o.s();!(t=o.n()).done;)r()}catch(e){o.e(e)}finally{o.f()}}},{key:"updateColor",value:function(e,t){var n=this.nodesGroup[t];n.fixedColor?n.uniforms.bufferColors.value=e:(n.uniforms.bufferColors={type:"vec3",value:e},n.mesh.geometry.deleteAttribute("bufferColors"),n.mesh.material.vertexShader=x(n.fixedNodeSize,!0,t),n.fixedColor=!0,n.mesh.geometry.needsUpdate=!0,n.fixedColor=!0),n.mesh.material.needsUpdate=!0}},{key:"updateMarker",value:function(e,t){var n=this.nodesGroup[t];n.mesh.material.vertexShader=x(n.fixedNodeSize,n.fixedColor,t),n.mesh.material.fragmentShader=z(e,t),n.mesh.material.needsUpdate=!0}},{key:"changeMarker",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=o[0];o[1],this.updateMarker(e,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"stopUpdate",value:function(){var e,t=U(this.getGroup());try{for(t.s();!(e=t.n()).done;){var n=F(e.value,2),o=(n[0],n[1]);o.mesh.geometry.needsUpdate=!1,o.mesh.material.needsUpdate=!1}}catch(e){t.e(e)}finally{t.f()}}},{key:"changeColor",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=o[0],a=(o[1],new s.d(e));this.updateColor(a,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"sizeByField",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=o[0],a=o[1],i=a.nodesData[e].flat();if(i.length!=a.numNodes)return void l.a.error(" ".concat(e," it's not in a valid format "));this.updateSizes(i,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateSizes",value:function(e,t){var n=this.nodesGroup[t],o=Math.min.apply(Math,M(e)),r=Math.max.apply(Math,M(e));if(e=e.map((function(e){return(e-o)/(r-o)})),n.fixedNodeSize){n.mesh.material.vertexShader=x(!1,n.fixedColor,t);var a=new s.g(new Float32Array(e),1,!0);n.mesh.geometry.addAttribute("bufferNodeSize",a),n.fixedNodeSize=!1,delete n.uniforms.bufferNodeSizes,n.mesh.geometry.needsUpdate=!0}else n.mesh.geometry.attributes.bufferNodeSizes.array=new Float32Array(e),n.mesh.geometry.attributes.bufferNodeSizes.needsUpdate=!0;n.mesh.material.needsUpdate=!0}},{key:"updateSize",value:function(e,t){var n=this.nodesGroup[t];n.fixedNodeSize?n.uniforms.bufferNodeSizes.value=color:(n.uniforms.bufferNodeSizes={type:"vec3",value:color},n.mesh.geometry.deleteAttribute("bufferNodeSizes"),n.mesh.material.vertexShader=x(n.fixedNodeSize,!0,t),n.fixedNodeSize=!0,n.mesh.geometry.needsUpdate=!0,n.fixedNodeSize=!0),n.mesh.material.needsUpdate=!0}},{key:"changeRadius",value:function(e){this.instancedNodes.geometry.attributes.bufferRadius=e,this.instancedNodes.material.needsUpdate=!0}},{key:"changeEdgeColor",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=(o[0],o[1]);r.uniforms.edgeColor.value=new s.d(e),r.mesh.geometry.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}}},{key:"changeEdgeWidth",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=(o[0],o[1]);r.uniforms.edgeWidth.value=e,r.mesh.geometry.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}}},{key:"changeOpacity",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=(o[0],o[1]);r.uniforms.bufferOpacity.value=e,r.mesh.geometry.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}}},{key:"changeScale",value:function(e){var t,n=U(this.getGroup());try{for(n.s();!(t=n.n()).done;){var o=F(t.value,2),r=(o[0],o[1]);r.uniforms.bufferNodeScale.value=e,r.mesh.geometry.needsUpdate=!0,r.mesh.material.needsUpdate=!0}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateNodePositions",value:function(e){this.instancedNodes.geometry.attributes.bufferNodePositions.array=new Float32Array(e),this.instancedNodes.geometry.attributes.bufferNodePositions.needsUpdate=!0}},{key:"deleteAllNodes",value:function(){for(var e=0,t=Object.entries(this.nodesGroup);e<t.length;e++){var n=F(t[e],2),o=n[0],r=n[1];r.mesh.geometry.dispose(),r.mesh.material.dispose(),r.mesh.geometry.needsUpdate=!0,r.mesh.material.needsUpdate=!0,this.scene.remove(r.mesh),delete this.nodesGroup[o]}}},{key:"createNodes",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=n?"main":e.props.includes("name")?e.name:G(),console.info("Creating nodes",t);var o={},r=Object.keys(e.id).length,a=0==e.props.includes("size"),i=0==e.props.includes("color");n&&this.deleteAllNodes();var d,c,l=e.pos,u={bufferOpacity:{type:"f",value:1},bufferNodeScale:{type:"f",value:1}};a&&(console.info("Fixed Node Size"),u.bufferNodeSize={type:"f",value:1}),i&&(console.info("Fixed Color"),u.bufferColors={type:"vec3",value:new Float32Array([.8,0,.8])});var h=new s.h,f=0==e.props.includes("marker")?I(Object.values(O)):e.marker;f="3do";var p=new s.r(1,1,1);(h=h.copy(p)).maxInstancedCount=r,u.edgeColor={type:"vec3",value:new s.d(E.nodes.edgeColor)},u.edgeWidth={type:"f",value:0},c=new s.u({vertexShader:x(a,i,t),fragmentShader:z(f,t),uniforms:u,transparent:!0,depthTest:!this.use2d,depthWrite:!0}),0==a&&h.addAttribute("bufferNodeSize",new s.g(new Float32Array(e.size),1,!0)),0==i&&h.addAttribute("bufferColors",new s.g(new Float32Array(e.color.flat()),3,!1)),h.addAttribute("bufferNodePositions",new s.g(new Float32Array(l),3,!1)),d=new s.m(h,c),this.scene.add(d),o.mesh=d,o.nodesData=e,o.uniforms=u,o.marker=f,o.fixedNodeSize=a,o.fixedColor=i,o.numNodes=r,this.nodesGroup[t]=o}}])&&L(t.prototype,n),o&&L(t,o),e}();function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=H(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,a=!0,i=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(i)throw r}}}}function D(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var K=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createEdges=this.createEdges.bind(this),this.scene=t,this.layer=n,this.bloomLayer=o,this.numEdges=0,this.edgesData={},this.instancedEdges}var t,n,o;return t=e,(n=[{key:"updateNodePositions",value:function(e){var t,n=[],o=function(t,n){return t.push.apply(t,D([0,1,2].map((function(t){return e[n+t]}))))},r=T(this.edgesData.nodes);try{for(r.s();!(t=r.n()).done;){var a=R(t.value,2),i=a[0],s=3*a[1];o(n,3*i),o(n,s)}}catch(e){r.e(e)}finally{r.f()}this.instancedEdges.geometry.attributes.position.array=new Float32Array(n),this.instancedEdges.geometry.attributes.position.needsUpdate=!0,this.instancedEdges.geometry.computeBoundingSphere()}},{key:"changeColorUniform",value:function(e){var t=new s.d(e);this.instancedEdges.material.color=t,this.instancedEdges.material.needsUpdate=!0}},{key:"changeWidth",value:function(e){this.instancedEdges.material.linewidth=e,this.instancedEdges.material.needsUpdate=!0}},{key:"colorByProp",value:function(e){var t=C()({colormap:"jet",nshades:this.numEdges,format:"float",alpha:1}),n=this.edgesData[e],o=t.map((function(e,t){return[n[t],e]})).sort((function(e,t){var n=R(e,1)[0];return R(t,1)[0]-n})).map((function(e){return R(e,2)[1]})).map((function(e){var t=R(e,4),n=t[0],o=t[1],r=t[2];return t[3],[n,o,r,n,o,r]})).flat();if(o.length!=6*this.numEdges)return l.a.error("Invalid prop"),void alert("prop fail");this.instancedEdges.geometry.attributes.color.array=new Float32Array(o),this.instancedEdges.geometry.attributes.color.needsUpdate=!0,this.instancedEdges.material.needsUpdate=!0}},{key:"changeOpacity",value:function(e){this.instancedEdges.material.opacity=e,this.instancedEdges.material.needsUpdate=!0}},{key:"ressetVerticesPos",value:function(e,t){this.createVertices(e,t),this.updateGeometry()}},{key:"updateGeometry",value:function(){this.edges.geometry.dispose(),this.edges.geometry=(new s.b).setFromPoints(Object.values(this.vertices))}},{key:"createVertices",value:function(e,t,n){this.vertices={},this.segments={};var o,r=[],a=function(t,n){return t.push.apply(t,D([0,1,2].map((function(t){var o=e.pos[3*n+t];return 2==t&&(o-=.01),o}))))},i=T(t.nodes);try{for(i.s();!(o=i.n()).done;){var s=R(o.value,2),d=s[0],c=s[1];e.id[d],e.id[c],Math.random()>-1&&(a(r,c),a(r,d))}}catch(e){i.e(e)}finally{i.f()}this.positions=r,this.colors=[]}},{key:"deleteAllEdges",value:function(){this.instancedEdges&&(this.instancedEdges.geometry.dispose(),this.instancedEdges.material.dispose(),this.instancedEdges.geometry.needsUpdate=!0,this.instancedEdges.material.needsUpdate=!0,this.scene.remove(this.instancedEdges),this.instancedEdges=null)}},{key:"createEdges",value:function(e,t){this.deleteAllEdges(),this.edgesData=t,this.numEdges=this.edgesData.nodes.length,this.createVertices(e,t);var n=new s.b,o=new s.j({vertexColors:!1,blending:s.a,transparent:!0,color:4095,opacity:.4,linewidth:2});n.setAttribute("position",new s.f(this.positions,3)),n.computeBoundingSphere();var r=new s.i(n,o);this.instancedEdges=r,this.scene.add(r)}}])&&q(t.prototype,n),o&&q(t,o),e}();function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var _={left:37,up:38,right:39,down:40,space:32,tab:9,escape:27},J=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domElement=t||document,this.keyCodes={},this.domElement.addEventListener("keydown",(function(e){return n.onKeyChange(e)}),!1),this.domElement.addEventListener("keyup",(function(e){return n.onKeyChange(e)}),!1),window.addEventListener("blur",(function(){return n.onBlur}),!1)}var t,n,o;return t=e,(n=[{key:"destroy",value:function(){var e=this;this.domElement.removeEventListener("keydown",(function(t){return e.onKeyChange(t)}),!1),this.domElement.removeEventListener("keyup",(function(t){return e.onKeyChange(t)}),!1),window.removeEventListener("blur",(function(){return e.onBlur}),!1)}},{key:"onBlur",value:function(){for(var e in this.keyCodes)this.keyCodes[e]=!1}},{key:"onKeyChange",value:function(e){var t=e.keyCode;this.keyCodes[t]="keydown"===e.type}},{key:"pressed",value:function(e){for(var t=e.split("+"),n=0;n<t.length;n++){var o=t[n],r=!1;if(r=-1!=Object.keys(_).indexOf(o)?this.keyCodes[_[o]]:this.keyCodes[o.toUpperCase().charCodeAt(0)],!r)return!1}return!0}},{key:"eventMatches",value:function(e,t){for(var n=_,o=Object.keys(n),r=t.split("+"),a=0;a<r.length;a++){var i=r[a],s=!1;if("shift"===i?s=!!e.shiftKey:"ctrl"===i?s=!!e.ctrlKey:"alt"===i?s=!!e.altKey:"meta"===i?s=!!e.metaKey:-1!==o.indexOf(i)?s=e.keyCode===n[i]:e.keyCode===i.toUpperCase().charCodeAt(0)&&(s=!0),!s)return!1}return!0}}])&&Q(t.prototype,n),o&&Q(t,o),e}();function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Z=function(){function e(t,n,o,r,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.keypressFunc=a,this.datGui=r,this.timeout=null,this.keyboard=new J,this.keypressEvent=this.keypressEvent.bind(this),this.keyboard.domElement.addEventListener("keydown",(function(e){return i.keypressEvent(e)})),this.appState=n}var t,n,o;return t=e,(n=[{key:"keypressEvent",value:function(e){var t=this,n=(e.repeat,e.key);switch(document.getElementById("bootstraAlertStrong"),$("#bootstrapAlert"),n.toLowerCase()){case"e":l.a.message("Edition Mode"),this.datGui.closed=!0,this.appState.vimMode="Edition",console.info("Vim mode Edition");break;case"v":l.a.message("Visual Mode"),this.datGui.closed=!1,this.appState.vimMode="Visual",console.info("Vim mode Visualization");break;case"n":l.a.message("Navigation Mode"),this.datGui.closed=!0,this.appState.vimMode="Navigation";break;case"s":document.getElementById("widthSaveImage").value=window.innerWidth,document.getElementById("heightSaveImage").value=window.innerHeight,this.keypressFunc(n,"saveImg");case"d":"Edition"==this.appState.vimMode&&this.keypressFunc(n,"deleteNode");break;case"l":case"j":case"i":case"k":"Visual"==this.appState.vimMode&&"l"==n&&l.a.confirm("Are you sure you want to reload the graph?",(function(){t.keypressFunc(n,"reloadGraph")})),"Edition"==this.appState.vimMode&&this.keypressFunc(n,"move");break;case"r":"Visual"==this.appState.vimMode&&l.a.message("Recalculating  positions"),this.keypressFunc(n,"recalcPos")}}}])&&X(t.prototype,n),o&&X(t,o),e}(),Y=n(34);function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t){for(var n="",o=0;o<t.length;o++){n+="<option value='"+t[o]+"'>"+t[o]+"</option>"}""!=n&&(e.domElement.children[0].innerHTML=n)}var re=function(){function e(t,n,o,r,a,i,d,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var l=new Y.a({autoPlace:!1,name:t});this.gui=l,document.getElementById("datGui".concat(t)).appendChild(l.domElement);var u=o.render;l.addFolder("Scene").addColor(d.scene,"color").name("Color").onChange((function(e){n.background=new s.d(e),u()}));var h=l.addFolder("Nodes");this.comunityField=h.add(c,"comunityField",c.comunityField).name("Comunity").onChange((function(e){a.setComunity(e)}));h.add({marker:{"--":""}},"marker",O).name("marker").onChange((function(e){a.changeMarker(e),u()})),h.add(d.nodes,"show").onChange((function(e){for(var t=0,n=Object.entries(a.nodes);t<n.length;t++){var o=ee(n[t],2);o[0];o[1].visible=e}d.nodes.show=e,u()})),h.addColor(d.nodes,"color").name("Color").onChange((function(e){a.changeColor(e),u()})),this.sizeField=h.add(c,"defaultProps",c.defaultProps).name("Size Field").onChange((function(e){a.sizeByField(e),u()})),h.add(d.nodes,"scale",.01,10,.01).name("Scale").onChange((function(e){a.changeScale(e),u()})),h.addColor(d.nodes,"edgeColor").name("Edge Color").onChange((function(e){a.changeEdgeColor(e),u()})),h.add(d.nodes,"edgeWidth",0,1,.01).name("Edge Width").onChange((function(e){a.changeEdgeWidth(e),u()})),h.add(d.nodes,"opacity",0,1).name("Opacity").onChange((function(e){a.changeOpacity(e),u()})),this.colorProp=h.add(c,"defaultProps",c.defaultProps).name("Color by Attr.").onChange((function(e){a.colorByProp(e)})),this.colorField=h.add(c,"defaultProps",c.defaultProps).name("Color Field").onChange((function(e){a.colorByField(e)})),this.nodesFolder=h;var f=l.addFolder("Edges");f.add(d.edges,"show").onChange((function(e){d.edges.show=e,u()})),f.add(d.edges,"opacity",0,1).name("Opacity").onChange((function(e){i.changeOpacity(e),u()})),f.add(d.edges,"width",0,5,.01).name("Width").onChange((function(e){i.changeWidth(e),u()}));var p={prop:[],field:[]};this.colorEdgeField=f.add(p,"field",p.prop).name("Color by Field.").onChange((function(e){i.colorByField(e)})),f.addColor(d.edges,"color").name("Color").onChange((function(e){i.changeColorUniform(e),u()})),f.add(d.edges,"opacity",0,1).name("Opacity").onChange((function(e){i.changeOpacity(e)}));var m=l.addFolder("Render");m.add(d.bloomPass,"exposure",.1,5).onChange((function(e){o.toneMappingExposure=Math.pow(e,4),u()})),m.add(d.bloomPass,"threshold",0,1).onChange((function(e){o.bloomPass.threshold=Number(e),u()})),m.add(d.bloomPass,"strength",0,10).onChange((function(e){o.bloomPass.strength=Number(e),u()})),m.add(d.bloomPass,"radius",0,1).step(.01).onChange((function(e){o.bloomPass.radius=Number(e),u()})),o.updateSize()}var t,n,o;return t=e,(n=[{key:"updateComunityField",value:function(e){e.unshift(""),oe(this.comunityField,e)}},{key:"updateNodeColorProp",value:function(e){e.unshift(""),e=e.filter((function(e){return"pos"!=e})),oe(this.colorField,e),oe(this.colorProp,e),oe(this.sizeField,e.filter((function(e){return"color"!=e})))}},{key:"updateEdgeColorProp",value:function(e){e.unshift(""),oe(this.colorEdgeField,e),oe(this.colorEdgeProp,e)}}])&&ne(t.prototype,n),o&&ne(t,o),e}();function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var se=function(){function e(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{fov:40,near:2,far:1e3,aspect:1};ae(this,e),this.Config=n,this.use2d=r,this.showStats=d,this.useHighQuality=a,this.useBloom=i,this.idCanvasHTML=t,this.canvas=document.getElementById("".concat(t)),this.container=document.getElementById("container".concat(t)),this.camera=r?new s.o(2,-2,2,-2,n.camera.near,n.camera.far):new s.q(c.fov,c.aspect,1,c.far),this.scene=new s.w,this.renderer,this.state,this.keyboardPressFunction=o}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state={vimMode:"Visual",isLoaded:!1,firstLoad:!0,takingScreenshot:!1,stopChanges:!1,renders:[],comunityField:{},rendering:!1,defaultProps:{}},window.innerWidth,window.innerHeight,this.state.originalAspect=window.innerWidth/window.innerHeight,this.scene.add(this.camera),this.scene.background=new s.d(this.Config.scene.color),this.nodes=new B(this.scene,this.use2d),this.edges=new K(this.scene,0,1),this.controls=new d.a(this.camera,this.canvas),this.controls.target.set(0,0,0),this.controls.enableKeys=!0,this.controls.screenSpacePanning=!0,this.use2d&&(this.controls.enableRotate=!1),console.group("Render Init"),this.renderer=new k(this.useHighQuality,this.useBloom,this.showStats,this.scene,this.controls,this.container,this.canvas,this.camera,this.state,e),console.groupEnd(),this.Config.useGuiControl&&(this.datGui=new re(this.idCanvasHTML,this.scene,this.renderer,this.camera,this.nodes,this.edges,this.Config,this.state)),this.Config.useKeyboard&&(this.keyboardInteraction=new Z(this.canvas,this.state,this.Config,this.datGui.gui,this.keyboardPressFunction))}},{key:"ressetLook",value:function(){var e=this.edges.instancedEdges.geometry.boundingSphere.center;this.camera.position.z=4*this.edges.instancedEdges.geometry.boundingSphere.radius,this.camera.lookAt(e),this.camera.updateProjectionMatrix(),this.renderer.render()}},{key:"deleteGraph",value:function(){this.nodes.deleteAllNodes(),this.edges.deleteAllEdges()}},{key:"getURI",value:function(e,t,n){n=n||!1;var o=this.renderer.getURI(e,t,n);this.uri=o}},{key:"stopRender",value:function(){this.renderer.stop()}}])&&ie(t.prototype,n),o&&ie(t,o),e}(),de=n(35),ce=n.n(de);function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ue=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.address=t,this.ws=ce.a.connect("http://".concat(t,"/")),this.ws.on("disconnect",(function(e){l.a.warning("closed connection")})),this.ws.on("webClientListener",(function(e){n(e)})),this.ws.emit("joinRoom",{room:"webClient"}),this.ws.emit("imTheProtagonist"),this.getGraph=this.getGraph.bind(this)}var t,n,o;return t=e,(n=[{key:"isOpen",value:function(){var e=this.ws.readyState===this.ws.OPEN;return e||(l.a.error("Connection Closed"),console.error("Conection closed"),this.ws=new WebSocket("ws://".concat(E.address,"/"))),e}},{key:"getGraph",value:function(){this.ws.emit("getGraph")}},{key:"send2server",value:function(e,t){this.ws.emit("sendRenderedImg",{imgURI:e,time:t})}},{key:"deleteNodes",value:function(e){if(console.info("deleteNodes",e),this.isOpen()){var t={type:"deleteNodes",info:{nodesId:e}};this.ws.send(JSON.stringify(t))}}},{key:"reloadGraph",value:function(){console.info("reload Graph"),this.isOpen()&&this.ws.send(JSON.stringify({type:"reloadGraph"}))}},{key:"recalcPos",value:function(){console.info("recalc pos"),this.isOpen()&&this.ws.send(JSON.stringify({type:"recalcPos"}))}}])&&le(t.prototype,n),o&&le(t,o),e}();E.isDev=!1;var he=window.location.search,fe=new URLSearchParams(he);console.info(he);var pe=!!fe.has("highQuality")&&"1"==fe.get("highQuality"),me=!fe.has("bloom")||"1"==fe.get("bloom"),ve=!!fe.has("use2d")&&"1"==fe.get("use2d"),ge=fe.has("address")?fe.get("address"):"localhost:5000",ye=!!fe.has("stats")&&"1"==fe.get("stats");E.useGuiControl=!0;var be=new se("graphCanvas",E,(function(e,t){switch(t){case"saveImg":$("#saveImageModal").modal("show");break;case"deleteNode":case"move":break;case"recalcPos":we.recalcPos();break;case"reloadGraph":we.reloadGraph()}}),ve,pe,me,ye);window.graphObjVar=be,console.group("Socket Conection"),console.info("Address:",ge);var we=new ue(ge,(function(e){switch(e.type){case"yourGraphData":clearInterval(ke),console.group("getGraph"),console.time("creatingEdges"),console.group("createEdges"),be.edges.createEdges(e.nodes,e.edges,e.defaultProps),console.groupEnd(),console.timeEnd("creatingEdges"),console.group("createNodes"),console.time("creatingNodes"),be.nodes.createNodes(e.nodes,!0),console.timeEnd("creatingNodes"),console.groupEnd(),be.state.firstLoad&&(be.firstLoad=!1,be.ressetLook(),clearInterval(ke)),be.nodes.stopUpdate(),be.datGui.updateNodeColorProp(e.nodes.props),be.datGui.updateComunityField(Object.keys(be.nodes.nodesGroup)),console.groupEnd();break;case"addNodes":be.nodes.createNodes(e.nodes,!1),be.state.firstLoad&&(be.firstLoad=!1,be.ressetLook(),clearInterval(ke));break;case"deleteNodes":break;case"updatePos":be.nodes.updateNodePositions(e.info.pos),be.edges.updateNodePositions(e.info.pos),be.renderer.render();break;case"askToRenderMyImg":var t=be.renderer.takeScreenshot(e.width,e.height,e.transparency);we.send2server(t,e.time);break;case"updateNodeColors":be.nodes.updateColors(e.colors,"main"),be.renderer.render()}}));be.init(we);var ke=setInterval((function(){we.getGraph()}),1e3);console.groupEnd()}},[[39,1,2]]]);
//# sourceMappingURL=0.app.js.map